<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Proyecto √âtico ‚Äî Danny Ashley Diaz Martinez</title>
  <meta name="description" content="Proyecto √©tico: principios, votos y reflexiones para una vida plena. Bit√°coras semanales, compromisos y seguimiento personal.">
  <style>
    /* ----------------- VARIABLES Y RESET ----------------- */
    :root{
      --sky-50: #f0f8ff;
      --sky-100: #dbeeff;
      --sky-200: #b6ddff;
      --sky-300: #7ecbff;
      --sky-400: #43b0ff;
      --sky-500: #2196f3; /* principal */
      --sky-600: #1e88e5;
      --sky-700: #1565c0;
      --muted: #5b6b7a;
      --bg: linear-gradient(180deg,var(--sky-50),#ffffff 40%);
      --card: rgba(255,255,255,0.95);
      --glass: rgba(255,255,255,0.7);
      --success: #16a34a;
      --danger: #dc2626;
      --maxw:1200px;
      --radius: 14px;
      --mono: "Inter", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      --shadow: 0 8px 30px rgba(13,40,80,0.06);
      --accent: var(--sky-500);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:var(--mono);background:var(--bg);color:#0b1b2b;line-height:1.6;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    }
    a{color:var(--accent);text-decoration:none}
    .container{max-width:var(--maxw);margin:28px auto;padding:20px}

    /* ----------------- CABECERA ----------------- */
    header.site-header{
      display:flex;align-items:center;gap:20px;padding:20px;border-radius:var(--radius);
      background:linear-gradient(90deg,rgba(33,150,243,0.12),rgba(33,150,243,0.04));
      box-shadow:var(--shadow);
    }
    .brand{display:flex;flex-direction:column}
    .project-title{margin:0;font-size:1.6rem;color:var(--sky-700)}
    .meta{font-size:0.92rem;color:var(--muted)}
    .header-actions{margin-left:auto;display:flex;gap:8px;align-items:center}

    .btn{
      padding:8px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:700;
      background:var(--accent);color:white;box-shadow:0 6px 18px rgba(33,150,243,0.12);
    }
    .btn.ghost{background:transparent;color:var(--sky-700);border:1px solid rgba(33,150,243,0.12);box-shadow:none}
    .tiny{padding:6px 8px;font-size:0.85rem;border-radius:8px}

    /* ----------------- LAYOUT ----------------- */
    .layout{display:grid;grid-template-columns:300px 1fr;gap:20px;margin-top:20px}
    nav.sidebar{background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow)}
    nav h3{margin:0 0 12px 0;color:var(--sky-700)}
    .tabs{display:flex;flex-direction:column;gap:8px}
    .tab-btn{background:transparent;border:0;padding:12px 10px;text-align:left;border-radius:8px;cursor:pointer;font-weight:700;color:#0b1722}
    .tab-btn:hover{background:linear-gradient(90deg,rgba(33,150,243,0.06),rgba(33,150,243,0.03))}
    .tab-btn.active{background:linear-gradient(90deg,rgba(33,150,243,0.12),rgba(33,150,243,0.05));color:var(--sky-700)}

    main.content{background:var(--card);padding:22px;border-radius:12px;box-shadow:var(--shadow);min-height:520px}
    .section{display:none}
    .section.active{display:block}
    .hero{padding:18px;border-radius:10px;background:linear-gradient(180deg,rgba(33,150,243,0.04),rgba(33,150,243,0.02));margin-bottom:18px}

    /* subtabs */
    .subtabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .subtabs button{padding:8px 12px;border-radius:999px;border:1px solid #e6f0fb;background:transparent;cursor:pointer;font-weight:700;color:var(--sky-700)}
    .subtabs button.active{background:var(--sky-500);color:white;border-color:transparent;box-shadow:0 8px 20px rgba(33,150,243,0.12)}

    /* content formatting */
    article h2{margin-top:6px;color:var(--sky-700)}
    article p{line-height:1.6;color:#142533}
    .card{background:var(--glass);padding:14px;border-radius:12px;margin:12px 0;border:1px solid rgba(33,150,243,0.06)}
    dl{display:grid;grid-template-columns:200px 1fr;gap:8px 16px;align-items:start}
    label{font-weight:800;color:#0b3b66}
    .small{font-size:0.9rem;color:var(--muted)}
    textarea, input[type="text"], input[type="date"], select {
      width:100%;padding:10px;border-radius:8px;border:1px solid #d6e9ff;background:linear-gradient(180deg,#fff,#f6fbff);
      font-family:inherit;resize:vertical;
    }

    /* ---- Principios: formularios .practice ---- */
:root[data-theme="dark"] .practice{
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--line);
}

:root[data-theme="dark"] .practice h4{ color: var(--ink-strong); }
:root[data-theme="dark"] .practice dl label{ color: var(--ink); }
:root[data-theme="dark"] .practice .small,
:root[data-theme="dark"] .practice .small.muted{ color: var(--ink-muted); }

/* campos dentro de .practice */
:root[data-theme="dark"] .practice textarea,
:root[data-theme="dark"] .practice input[type="text"],
:root[data-theme="dark"] .practice input[type="date"],
:root[data-theme="dark"] .practice select{
  background: var(--field-bg);
  border: 1px solid var(--field-border);
  color: var(--ink);
}
:root[data-theme="dark"] .practice textarea::placeholder,
:root[data-theme="dark"] .practice input::placeholder{ color:#7b8aa7; }

/* icono del datepicker en dark */
:root[data-theme="dark"] .practice input[type="date"]::-webkit-calendar-picker-indicator{
  filter: invert(1) opacity(.8);
}

/* botones en el footer del form */
:root[data-theme="dark"] .practice .btn.secondary,
:root[data-theme="dark"] .practice .btn.ghost{
  color: var(--accent);
  border: 1px solid rgba(96,165,250,0.35);
}
:root[data-theme="dark"] .practice .btn.secondary:hover,
:root[data-theme="dark"] .practice .btn.ghost:hover{
  background: rgba(96,165,250,0.12);
}


    .long-text{white-space:pre-line}
    footer.app-footer{margin-top:18px;text-align:center;color:var(--muted);font-size:0.9rem;padding:14px}

    /* Helpers */
    .muted{color:var(--muted)}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#eaf6ff;color:var(--sky-700);font-weight:700}
    .row{display:flex;gap:12px;align-items:center}
    .col{flex:1}

    /* responsive */
    @media (max-width:980px){.layout{grid-template-columns:1fr}nav.sidebar{order:2}.container{padding:12px}}
    @media (max-width:520px){dl{grid-template-columns:1fr} .grid-3{grid-template-columns:1fr} .commit{flex-direction:column;align-items:stretch}}
  </style>
</head>
<body>
  <div class="container" role="document">
    <header class="site-header" role="banner" aria-label="Cabecera del proyecto √©tico">
      <div class="brand">
        <h1 class="project-title">Proyecto √©tico</h1>
        <div class="meta">Autor: <strong>Danny Ashley Diaz Martinez</strong> ‚Äî <em>La integridad es la br√∫jula que gu√≠a mis pasos</em></div>
      </div>

      <div class="header-actions" role="navigation" aria-label="Acciones principales">
        <button id="darkToggle" class="btn tiny ghost" aria-pressed="false" title="Alternar modo oscuro">üåô Modo</button>
        <button id="exportAll" class="btn tiny" title="Exportar todo el proyecto">Exportar todo</button>
        <button id="printBtn" class="btn tiny ghost" title="Imprimir vista actual">Imprimir</button>
      </div>
    </header>

    <div class="layout" role="main">
      <!-- SIDEBAR -->
      <nav class="sidebar" aria-label="Navegaci√≥n principal">
        <h3>Secciones</h3>
        <div class="tabs" id="mainTabs" role="tablist" aria-orientation="vertical">
          <button class="tab-btn active" data-target="portada" role="tab" aria-selected="true">Portada</button>
          <button class="tab-btn" data-target="introduccion" role="tab">Introducci√≥n</button>
          <button class="tab-btn" data-target="principios" role="tab">Principios para una vida plena</button>
          <button class="tab-btn" data-target="votos" role="tab">Los 7 votos del √©xito</button>
          <button class="tab-btn" data-target="reflexiones" role="tab">Reflexiones ‚Äî La vida no es lo que te imaginas</button>
          <button class="tab-btn" data-target="discurso" role="tab">Discurso final</button>
        </div>
        <hr style="margin:12px 0;border-color:rgba(33,150,243,0.06)">
        <div>
          <div class="small muted">Estado del proyecto</div>
          <div style="margin-top:8px"><span class="pill" id="entriesCount">0 pr√°cticas guardadas</span></div>
        </div>
      </nav>

      <!-- MAIN CONTENT -->
      <main class="content" id="mainContent">
        <!-- PORTADA -->
        <section id="portada" class="section active" role="tabpanel">
          <div class="hero" aria-hidden="false">
            <h2>Proyecto √©tico ‚Äî Portada</h2>
            <p class="small">T√≠tulo: <strong>Proyecto √©tico</strong> ‚Äî Autor: <strong>Danny Ashley Diaz Martinez</strong></p>
            <p class="small">Lema personal: <em>La integridad es la br√∫jula que gu√≠a mis pasos</em></p>
          </div>

          <article>
            <h3>Resumen del proyecto</h3>
            <p class="long-text">Este proyecto est√° pensado como un camino pr√°ctico y medible para desarrollar principios √©ticos y h√°bitos que transformen la vida personal, familiar y laboral. Contiene bit√°coras semanales para el seguimiento de pr√°cticas, los siete votos del √©xito con compromisos concretos, y una serie de reflexiones organizadas en cap√≠tulos para acompa√±ar la madurez moral y mental.</p>

            <div class="card" role="region" aria-label="Objetivos del proyecto">
              <h4>Objetivos</h4>
              <ol>
                <li>Promover la comprensi√≥n y aplicaci√≥n diaria de principios √©ticos.</li>
                <li>Registrar el progreso mediante bit√°coras con evidencia y reflexiones.</li>
                <li>Establecer votos concretos que orienten comportamientos sostenibles.</li>
                <li>Generar un discurso final que sintetice aprendizajes y el impacto.</li>
              </ol>
            </div>
          </article>
        </section>

        <!-- INTRODUCCI√ìN -->
        <section id="introduccion" class="section" role="tabpanel" aria-hidden="true">
          <article>
            <h2>Introducci√≥n</h2>
            <p>La √©tica es el arte de decidir con prop√≥sito. Este proyecto no es una colecci√≥n de ideas abstractas: es un plan de pr√°cticas concretas y registros que permiten observar cambios reales. A trav√©s de la constancia y la reflexi√≥n, se busca transformar principios en h√°bitos.</p>

            <h3>C√≥mo usar este espacio</h3>
            <ul>
              <li>Navega entre las secciones desde la barra lateral.</li>
              <li>En cada principio encontrar√°s una bit√°cora para registrar la pr√°ctica semanal.</li>
              <li>Guarda tus entradas localmente y exp√≥rtalas para compartir o archivar.</li>
              <li>Revisa peri√≥dicamente tus votos y actualiza compromisos seg√∫n avances.</li>
            </ul>
          </article>
        </section>

        <!-- PRINCIPIOS -->
        <section id="principios" class="section" role="tabpanel" aria-hidden="true">
          <article>
            <h2>Principios para una vida plena</h2>
            <p class="small">Selecciona un principio para ver su gu√≠a y registrar tu pr√°ctica semanal.</p>

            <div class="subtabs" id="principiosTabs" role="tablist" aria-label="Principios">
              <button class="subtab active" data-target="comunicacion" role="tab" aria-selected="true">Comunicaci√≥n</button>
              <button class="subtab" data-target="comprender" role="tab">Comprender a las personas</button>
              <button class="subtab" data-target="motivar" role="tab">Motivar a las personas</button>
              <button class="subtab" data-target="justicia" role="tab">Justicia</button>
              <button class="subtab" data-target="critica" role="tab">Cr√≠tica</button>
              <button class="subtab" data-target="perdon" role="tab">Perd√≥n</button>
              <button class="subtab" data-target="confiar" role="tab">Confiar en Dios</button>
              <button class="subtab" data-target="integridad" role="tab">Integridad</button>
            </div>

            <div id="principioContent">
              <!-- COMUNICACI√ìN -->
              <div id="comunicacion" class="p-item subcontent active" role="tabpanel">
                <h3>Comunicaci√≥n</h3>
                <p><strong>Definici√≥n:</strong> Transmitir con claridad y escuchar con empat√≠a, evitando manipulaciones.</p>
                <p class="long-text">T√©cnicas: escucha activa, parafraseo, "mensajes yo" (yo siento/yo pienso), preguntas abiertas. Ejercicios semanales: practicar 10 minutos de escucha sin interrumpir; resumir lo escuchado en una frase; pedir retroalimentaci√≥n al final de una conversaci√≥n importante.</p>

                <div class="practice" aria-label="Bit√°cora de Comunicaci√≥n">
                  <h4>Registrar pr√°ctica ‚Äî Comunicaci√≥n</h4>
                  <form class="logForm" data-principio="Comunicaci√≥n">
                    <dl>
                      <label>Principio √âtico Aplicado</label><div>Comunicaci√≥n ‚Äî Escucha activa y honestidad.</div>
                      <label>Definici√≥n</label><div>Comunicar con claridad, escuchando antes de reaccionar.</div>
                      <label>Fecha de la pr√°ctica</label><div><input type="date" name="fecha" required></div>
                      <label>Entorno</label>
                      <div>
                        <select name="entorno" required>
                          <option value="">Selecciona...</option>
                          <option>Personal</option>
                          <option>Laboral</option>
                          <option>Familiar</option>
                        </select>
                      </div>
                      <label>Situaci√≥n espec√≠fica</label>
                      <div><textarea name="situacion" rows="5" placeholder="Describe la situaci√≥n, acciones concretas y testimonios..." required></textarea></div>
                      <label>Reflexi√≥n √©tica</label>
                      <div><textarea name="reflexion" rows="4" placeholder="¬øQu√© aprendiste? ¬øQu√© emociones surgieron?" required></textarea></div>
                      <label>Impacto</label>
                      <div><textarea name="impacto" rows="3" placeholder="Efecto observado en el entorno"></textarea></div>
                      <label>Compromiso a futuro</label>
                      <div><textarea name="compromiso" rows="3" placeholder="¬øQu√© mejorar√≠as? ¬øC√≥mo fortalecer este principio?" required></textarea></div>
                      <label>Frase de compromiso final</label>
                      <div><input type="text" name="frase" placeholder="Ej: 'Me comprometo a escuchar antes de responder.'" required></div>
                    </dl>

                    <div class="commit">
                      <div style="display:flex;gap:8px;">
                        <button type="button" class="btn saveBtn">Guardar bit√°cora</button>
                        <button type="button" class="btn secondary exportBtn">Exportar entrada</button>
                      </div>
                      <div style="display:flex;gap:8px">
                        <button type="button" class="btn ghost clearBtn">Limpiar</button>
                        <span class="small muted savedMsg" aria-live="polite" style="align-self:center"></span>
                      </div>
                    </div>
                  </form>
                </div>

                <div class="card" id="comunicacionList" aria-live="polite" style="margin-top:12px">
                  <h4>Registros guardados</h4>
                  <div class="small muted">Aqu√≠ aparecer√°n tus entradas guardadas para este principio.</div>
                  <ul id="list-comunicacion" style="margin-top:8px"></ul>
                </div>
              </div>

              <!-- COMPRENDER -->
              <div id="comprender" class="p-item subcontent" role="tabpanel" style="display:none">
                <h3>Comprender a las personas</h3>
                <p><strong>Definici√≥n:</strong> Cultivar empat√≠a y curiosidad para entender motivos antes de juzgar.</p>
                <p class="long-text">Pr√°cticas: indagar con respeto, considerar contexto, usar la regla de las 3 preguntas: ¬øqu√© siente? ¬øqu√© piensa? ¬øqu√© necesita?</p>

                <div class="practice">
                  <h4>Registrar pr√°ctica ‚Äî Comprender</h4>
                  <form class="logForm" data-principio="Comprender a las personas">
                    <dl>
                      <label>Fecha de la pr√°ctica</label><div><input type="date" name="fecha" required></div>
                      <label>Entorno</label><div>
                        <select name="entorno" required><option value="">Selecciona...</option><option>Personal</option><option>Laboral</option><option>Familiar</option></select></div>
                      <label>Situaci√≥n espec√≠fica</label><div><textarea name="situacion" rows="5" required></textarea></div>
                      <label>Reflexi√≥n √©tica</label><div><textarea name="reflexion" rows="4"></textarea></div>
                      <label>Impacto</label><div><textarea name="impacto" rows="3"></textarea></div>
                      <label>Compromiso a futuro</label><div><textarea name="compromiso" rows="3"></textarea></div>
                      <label>Frase de compromiso final</label><div><input type="text" name="frase"></div>
                    </dl>
                    <div class="commit">
                      <div style="display:flex;gap:8px;">
                        <button type="button" class="btn saveBtn">Guardar bit√°cora</button>
                        <button type="button" class="btn secondary exportBtn">Exportar entrada</button>
                      </div>
                      <div style="display:flex;gap:8px">
                        <button type="button" class="btn ghost clearBtn">Limpiar</button>
                        <span class="small muted savedMsg"></span>
                      </div>
                    </div>
                  </form>
                </div>

                <div class="card" id="comprenderList">
                  <h4>Registros guardados</h4>
                  <ul id="list-comprender" style="margin-top:8px"></ul>
                </div>
              </div>

              <!-- MOTIVAR -->
              <div id="motivar" class="p-item subcontent" role="tabpanel" style="display:none">
                <h3>Motivar a las personas</h3>
                <p><strong>Definici√≥n:</strong> Inspirar con el ejemplo, reconocer esfuerzos y crear ambientes de crecimiento.</p>
                <p class="long-text">Acciones concretas: reconocer 1 logro por semana, asignar metas peque√±as, ofrecer retroalimentaci√≥n constructiva y mentorear cuando sea posible.</p>

                <div class="practice">
                  <h4>Registrar pr√°ctica ‚Äî Motivar</h4>
                  <form class="logForm" data-principio="Motivar a las personas">
                    <dl>
                      <label>Fecha de la pr√°ctica</label><div><input type="date" name="fecha" required></div>
                      <label>Entorno</label><div><select name="entorno" required><option value="">Selecciona...</option><option>Personal</option><option>Laboral</option><option>Familiar</option></select></div>
                      <label>Situaci√≥n espec√≠fica</label><div><textarea name="situacion" rows="4"></textarea></div>
                      <label>Reflexi√≥n</label><div><textarea name="reflexion" rows="4"></textarea></div>
                      <label>Compromiso</label><div><textarea name="compromiso" rows="3"></textarea></div>
                    </dl>
                    <div class="commit">
                      <div style="display:flex;gap:8px;">
                        <button type="button" class="btn saveBtn">Guardar bit√°cora</button>
                        <button type="button" class="btn secondary exportBtn">Exportar entrada</button>
                      </div>
                      <div style="display:flex;gap:8px">
                        <button type="button" class="btn ghost clearBtn">Limpiar</button>
                        <span class="small muted savedMsg"></span>
                      </div>
                    </div>
                  </form>
                </div>

                <div class="card" id="motivarList">
                  <h4>Registros guardados</h4>
                  <ul id="list-motivar" style="margin-top:8px"></ul>
                </div>
              </div>

              <!-- JUSTICIA -->
              <div id="justicia" class="p-item subcontent" role="tabpanel" style="display:none">
                <h3>Justicia</h3>
                <p><strong>Definici√≥n:</strong> Tratar con imparcialidad, implementar criterios transparentes y corregir desigualdades.</p>
                <p class="long-text">Pr√°cticas: revisar decisiones con criterios claros, documentar procesos y pedir feedback a terceros cuando exista duda.</p>

                <div class="practice">
                  <h4>Registrar pr√°ctica ‚Äî Justicia</h4>
                  <form class="logForm" data-principio="Justicia">
                    <dl>
                      <label>Fecha</label><div><input type="date" name="fecha" required></div>
                      <label>Entorno</label><div><select name="entorno" required><option>Personal</option><option>Laboral</option><option>Familiar</option></select></div>
                      <label>Situaci√≥n</label><div><textarea name="situacion" rows="4"></textarea></div>
                      <label>Reflexi√≥n</label><div><textarea name="reflexion" rows="4"></textarea></div>
                    </dl>
                    <div class="commit">
                      <div style="display:flex;gap:8px;"><button type="button" class="btn saveBtn">Guardar</button><button type="button" class="btn secondary exportBtn">Exportar</button></div>
                      <div style="display:flex;gap:8px"><button class="btn ghost clearBtn">Limpiar</button><span class="small muted savedMsg"></span></div>
                    </div>
                  </form>
                </div>

                <div class="card" id="justiciaList">
                  <h4>Registros guardados</h4>
                  <ul id="list-justicia" style="margin-top:8px"></ul>
                </div>
              </div>

              <!-- CR√çTICA -->
              <div id="critica" class="p-item subcontent" role="tabpanel" style="display:none">
                <h3>Cr√≠tica</h3>
                <p><strong>Definici√≥n:</strong> Emitir juicios constructivos con la intenci√≥n de mejorar procesos y relaciones.</p>
                <p class="long-text">Modelo recomendado: Observaci√≥n ‚Äî Impacto ‚Äî Sugerencia. Practicar el lenguaje no acusatorio y pedir permiso antes de dar retroalimentaci√≥n directa.</p>

                <div class="practice">
                  <h4>Registrar pr√°ctica ‚Äî Cr√≠tica</h4>
                  <form class="logForm" data-principio="Cr√≠tica">
                    <dl>
                      <label>Fecha</label><div><input type="date" name="fecha"></div>
                      <label>Entorno</label><div><select name="entorno"><option>Personal</option><option>Laboral</option><option>Familiar</option></select></div>
                      <label>Situaci√≥n</label><div><textarea name="situacion" rows="4"></textarea></div>
                      <label>Observaci√≥n</label><div><textarea name="observacion" rows="3" placeholder="Observaci√≥n espec√≠fica"></textarea></div>
                      <label>Sugerencia</label><div><textarea name="sugerencia" rows="3" placeholder="Sugerencia pr√°ctica"></textarea></div>
                    </dl>
                    <div class="commit">
                      <div style="display:flex;gap:8px;"><button type="button" class="btn saveBtn">Guardar</button><button type="button" class="btn secondary exportBtn">Exportar</button></div>
                      <div style="display:flex;gap:8px"><button class="btn ghost clearBtn">Limpiar</button><span class="small muted savedMsg"></span></div>
                    </div>
                  </form>
                </div>

                <div class="card" id="criticaList">
                  <h4>Registros guardados</h4>
                  <ul id="list-critica" style="margin-top:8px"></ul>
                </div>
              </div>

              <!-- PERD√ìN -->
              <div id="perdon" class="p-item subcontent" role="tabpanel" style="display:none">
                <h3>Perd√≥n</h3>
                <p><strong>Definici√≥n:</strong> Liberar rencores y trabajar en la restauraci√≥n cuando sea posible, manteniendo l√≠mites saludables.</p>
                <p class="long-text">Pr√°ctica: reconocer el dolor, expresar perd√≥n con responsabilidad y dise√±ar pasos concretos para reconstruir confianza.</p>

                <div class="practice">
                  <h4>Registrar pr√°ctica ‚Äî Perd√≥n</h4>
                  <form class="logForm" data-principio="Perd√≥n">
                    <dl>
                      <label>Fecha</label><div><input type="date" name="fecha"></div>
                      <label>Entorno</label><div><select name="entorno"><option>Personal</option><option>Familiar</option></select></div>
                      <label>Situaci√≥n</label><div><textarea name="situacion" rows="4"></textarea></div>
                      <label>Reflexi√≥n</label><div><textarea name="reflexion" rows="4"></textarea></div>
                    </dl>
                    <div class="commit">
                      <div style="display:flex;gap:8px;"><button type="button" class="btn saveBtn">Guardar</button><button type="button" class="btn secondary exportBtn">Exportar</button></div>
                      <div style="display:flex;gap:8px"><button class="btn ghost clearBtn">Limpiar</button><span class="small muted savedMsg"></span></div>
                    </div>
                  </form>
                </div>

                <div class="card" id="perdonList">
                  <h4>Registros guardados</h4>
                  <ul id="list-perdon" style="margin-top:8px"></ul>
                </div>
              </div>

              <!-- CONFIAR EN DIOS -->
              <div id="confiar" class="p-item subcontent" role="tabpanel" style="display:none">
                <h3>Confiar en Dios</h3>
                <p><strong>Definici√≥n:</strong> Depositar esperanza y gu√≠a en la fe como fundamento para la toma de decisiones y la resiliencia.</p>
                <p class="long-text">Pr√°cticas: momentos de reflexi√≥n, oraci√≥n, di√°logo con una comunidad de fe y acci√≥n coherente con las convicciones religiosas.</p>

                <div class="practice">
                  <h4>Registrar pr√°ctica ‚Äî Confiar en Dios</h4>
                  <form class="logForm" data-principio="Confiar en Dios">
                    <dl>
                      <label>Fecha</label><div><input type="date" name="fecha"></div>
                      <label>Entorno</label><div><select name="entorno"><option>Personal</option><option>Comunidad</option></select></div>
                      <label>Pr√°ctica</label><div><textarea name="situacion" rows="4" placeholder="Oraci√≥n, lectura, acci√≥n de fe"></textarea></div>
                      <label>Reflexi√≥n</label><div><textarea name="reflexion" rows="4"></textarea></div>
                    </dl>
                    <div class="commit">
                      <div style="display:flex;gap:8px;"><button type="button" class="btn saveBtn">Guardar</button><button type="button" class="btn secondary exportBtn">Exportar</button></div>
                      <div style="display:flex;gap:8px"><button class="btn ghost clearBtn">Limpiar</button><span class="small muted savedMsg"></span></div>
                    </div>
                  </form>
                </div>

                <div class="card" id="confiarList">
                  <h4>Registros guardados</h4>
                  <ul id="list-confiar" style="margin-top:8px"></ul>
                </div>
              </div>

              <!-- INTEGRIDAD -->
              <div id="integridad" class="p-item subcontent" role="tabpanel" style="display:none">
                <h3>Integridad</h3>
                <p><strong>Definici√≥n:</strong> Coherencia entre palabra, pensamiento y acci√≥n; actuar bien incluso cuando nadie observa.</p>
                <div class="card">
                  <h4>Checklist para la integridad diaria</h4>
                  <ol>
                    <li>¬øMi decisi√≥n respeta la verdad?</li>
                    <li>¬øProtege la dignidad de los involucrados?</li>
                    <li>¬øPuedo justificar mi acci√≥n p√∫blicamente?</li>
                  </ol>
                </div>

                <div class="practice">
                  <h4>Registrar pr√°ctica ‚Äî Integridad</h4>
                  <form class="logForm" data-principio="Integridad">
                    <dl>
                      <label>Fecha</label><div><input type="date" name="fecha"></div>
                      <label>Situaci√≥n</label><div><textarea name="situacion" rows="4"></textarea></div>
                      <label>Reflexi√≥n</label><div><textarea name="reflexion" rows="4"></textarea></div>
                      <label>Compromiso</label><div><textarea name="compromiso" rows="3"></textarea></div>
                    </dl>
                    <div class="commit">
                      <div style="display:flex;gap:8px;"><button type="button" class="btn saveBtn">Guardar</button><button type="button" class="btn secondary exportBtn">Exportar</button></div>
                      <div style="display:flex;gap:8px"><button class="btn ghost clearBtn">Limpiar</button><span class="small muted savedMsg"></span></div>
                    </div>
                  </form>
                </div>

                <div class="card" id="integridadList">
                  <h4>Registros guardados</h4>
                  <ul id="list-integridad" style="margin-top:8px"></ul>
                </div>
              </div>

            </div>
          </article>
        </section>

        <!-- VOTOS -->
        <section id="votos" class="section" role="tabpanel" aria-hidden="true">
          <article>
            <h2>Los 7 votos del √©xito</h2>
            <p class="small">Cada voto incluye prop√≥sito, √°mbitos de aplicaci√≥n y compromisos pr√°cticos. Selecciona un voto para ver detalles y generar tu versi√≥n personalizada.</p>

            <div class="subtabs" id="votosTabs" role="tablist" aria-label="Votos">
              <button class="vsub active" data-target="honestidad" role="tab" aria-selected="true">Honestidad</button>
              <button class="vsub" data-target="generosidad" role="tab">Generosidad</button>
              <button class="vsub" data-target="trabajo" role="tab">Trabajo duro</button>
              <button class="vsub" data-target="humildad" role="tab">Humildad</button>
              <button class="vsub" data-target="planificacion" role="tab">Planificaci√≥n efectiva</button>
              <button class="vsub" data-target="sentido" role="tab">Sentido com√∫n</button>
              <button class="vsub" data-target="dominio" role="tab">Dominio propio</button>
            </div>

            <div id="votosContent">
              <!-- HONESTIDAD -->
              <div id="honestidad" class="v-item subcontent active" role="tabpanel">
                <h3>Voto: Honestidad</h3>
                <p><strong>Prop√≥sito:</strong> Preservar la confianza y la claridad en todas mis acciones.</p>
                <h4>√Åmbitos de aplicaci√≥n</h4>
                <h5>Personal</h5>
                <p>Valor a proteger: Veracidad. Actitudes: honestidad consigo mismo, reconocer errores.</p>
                <p><strong>Compromisos (ejemplos):</strong> 1) Anotar decisiones importantes y razones; 2) Decir la verdad aunque incomode; 3) Evitar excusas.</p>

                <div class="card">
                  <h4>Redacta tu voto personal</h4>
                  <div class="grid-3">
                    <input type="text" id="voto-title-honestidad" placeholder="T√≠tulo breve del voto (ej: Honestidad radical)">
                    <input type="text" id="voto-proposito-honestidad" placeholder="Prop√≥sito (una frase corta)">
                    <input type="text" id="voto-frase-honestidad" placeholder="Frase de compromiso final">
                  </div>
                  <div style="margin-top:10px;display:flex;gap:8px">
                    <button class="btn saveVotoBtn" data-voto="Honestidad">Guardar Voto</button>
                    <button class="btn ghost copyVotoBtn" data-voto="Honestidad">Copiar al portapapeles</button>
                  </div>
                  <div class="small muted" id="votoMsg-honestidad" style="margin-top:8px"></div>
                </div>
              </div>

              <!-- GENEROSIDAD -->
              <div id="generosidad" class="v-item subcontent" role="tabpanel" style="display:none">
                <h3>Voto: Generosidad</h3>
                <p><strong>Prop√≥sito:</strong> Compartir tiempo, recursos y atenci√≥n para crear bienestar com√∫n.</p>
                <p><strong>Compromisos (ejemplo):</strong> Donar tiempo una vez al mes; ofrecer mentor√≠a; practicar actos de servicio sin esperar reconocimiento.</p>

                <div class="card">
                  <h4>Redacta tu voto personal</h4>
                  <div class="grid-3">
                    <input type="text" id="voto-title-generosidad" placeholder="T√≠tulo breve">
                    <input type="text" id="voto-proposito-generosidad" placeholder="Prop√≥sito">
                    <input type="text" id="voto-frase-generosidad" placeholder="Frase final">
                  </div>
                  <div style="margin-top:10px;display:flex;gap:8px">
                    <button class="btn saveVotoBtn" data-voto="Generosidad">Guardar Voto</button>
                    <button class="btn ghost copyVotoBtn" data-voto="Generosidad">Copiar</button>
                  </div>
                  <div class="small muted" id="votoMsg-generosidad" style="margin-top:8px"></div>
                </div>
              </div>

              <!-- TRABAJO DURO -->
              <div id="trabajo" class="v-item subcontent" role="tabpanel" style="display:none">
                <h3>Voto: Trabajo duro</h3>
                <p>Prop√≥sito: Alcanzar objetivos mediante disciplina, perseverancia y h√°bitos consistentes.</p>
                <p><strong>Compromisos:</strong> Establecer rutinas diarias, priorizar tareas de alto impacto, revisar progresos semanalmente.</p>

                <div class="card">
                  <h4>Redacta tu voto personal</h4>
                  <div class="grid-3">
                    <input type="text" id="voto-title-trabajo" placeholder="T√≠tulo breve">
                    <input type="text" id="voto-proposito-trabajo" placeholder="Prop√≥sito">
                    <input type="text" id="voto-frase-trabajo" placeholder="Frase final">
                  </div>
                  <div style="margin-top:10px;display:flex;gap:8px">
                    <button class="btn saveVotoBtn" data-voto="Trabajo duro">Guardar Voto</button>
                    <button class="btn ghost copyVotoBtn" data-voto="Trabajo duro">Copiar</button>
                  </div>
                  <div class="small muted" id="votoMsg-trabajo" style="margin-top:8px"></div>
                </div>
              </div>

              <!-- HUMILDAD -->
              <div id="humildad" class="v-item subcontent" role="tabpanel" style="display:none">
                <h3>Voto: Humildad</h3>
                <p>Prop√≥sito: Reconocer limitaciones, pedir retroalimentaci√≥n y aprender continuamente.</p>

                <div class="card">
                  <h4>Redacta tu voto personal</h4>
                  <div class="grid-3">
                    <input type="text" id="voto-title-humildad" placeholder="T√≠tulo breve">
                    <input type="text" id="voto-proposito-humildad" placeholder="Prop√≥sito">
                    <input type="text" id="voto-frase-humildad" placeholder="Frase final">
                  </div>
                  <div style="margin-top:10px;display:flex;gap:8px">
                    <button class="btn saveVotoBtn" data-voto="Humildad">Guardar Voto</button>
                    <button class="btn ghost copyVotoBtn" data-voto="Humildad">Copiar</button>
                  </div>
                  <div class="small muted" id="votoMsg-humildad" style="margin-top:8px"></div>
                </div>
              </div>

              <!-- PLANIFICACI√ìN -->
              <div id="planificacion" class="v-item subcontent" role="tabpanel" style="display:none">
                <h3>Voto: Planificaci√≥n efectiva</h3>
                <p>Prop√≥sito: Convertir metas en pasos claros, medibles y con revisiones peri√≥dicas.</p>

                <div class="card">
                  <h4>Redacta tu voto personal</h4>
                  <div class="grid-3">
                    <input type="text" id="voto-title-planificacion" placeholder="T√≠tulo breve">
                    <input type="text" id="voto-proposito-planificacion" placeholder="Prop√≥sito">
                    <input type="text" id="voto-frase-planificacion" placeholder="Frase final">
                  </div>
                  <div style="margin-top:10px;display:flex;gap:8px">
                    <button class="btn saveVotoBtn" data-voto="Planificaci√≥n efectiva">Guardar Voto</button>
                    <button class="btn ghost copyVotoBtn" data-voto="Planificaci√≥n efectiva">Copiar</button>
                  </div>
                  <div class="small muted" id="votoMsg-planificacion" style="margin-top:8px"></div>
                </div>
              </div>

              <!-- SENTIDO COM√öN -->
              <div id="sentido" class="v-item subcontent" role="tabpanel" style="display:none">
                <h3>Voto: Sentido com√∫n</h3>
                <p>Prop√≥sito: Aplicar juicio pr√°ctico en decisiones diarias, priorizando seguridad y bienestar colectivo.</p>

                <div class="card">
                  <h4>Redacta tu voto personal</h4>
                  <div class="grid-3">
                    <input type="text" id="voto-title-sentido" placeholder="T√≠tulo breve">
                    <input type="text" id="voto-proposito-sentido" placeholder="Prop√≥sito">
                    <input type="text" id="voto-frase-sentido" placeholder="Frase final">
                  </div>
                  <div style="margin-top:10px;display:flex;gap:8px">
                    <button class="btn saveVotoBtn" data-voto="Sentido com√∫n">Guardar Voto</button>
                    <button class="btn ghost copyVotoBtn" data-voto="Sentido com√∫n">Copiar</button>
                  </div>
                  <div class="small muted" id="votoMsg-sentido" style="margin-top:8px"></div>
                </div>
              </div>

              <!-- DOMINIO PROPIO -->
              <div id="dominio" class="v-item subcontent" role="tabpanel" style="display:none">
                <h3>Voto: Dominio propio</h3>
                <p>Prop√≥sito: Gestionar impulsos y mantener h√°bitos que favorezcan objetivos a largo plazo.</p>

                <div class="card">
                  <h4>Redacta tu voto personal</h4>
                  <div class="grid-3">
                    <input type="text" id="voto-title-dominio" placeholder="T√≠tulo breve">
                    <input type="text" id="voto-proposito-dominio" placeholder="Prop√≥sito">
                    <input type="text" id="voto-frase-dominio" placeholder="Frase final">
                  </div>
                  <div style="margin-top:10px;display:flex;gap:8px">
                    <button class="btn saveVotoBtn" data-voto="Dominio propio">Guardar Voto</button>
                    <button class="btn ghost copyVotoBtn" data-voto="Dominio propio">Copiar</button>
                  </div>
                  <div class="small muted" id="votoMsg-dominio" style="margin-top:8px"></div>
                </div>
              </div>

            </div>
          </article>
        </section>

        <!-- REFLEXIONES -->
        <section id="reflexiones" class="section" role="tabpanel" aria-hidden="true">
          <article>
            <h2>Reflexiones ‚Äî La vida no es lo que te imaginas</h2>
            <p class="small">Cap√≠tulos con gu√≠a interpretativa y preguntas para la reflexi√≥n.</p>

            <div class="subtabs" id="reflexTabs" role="tablist">
              <button class="rsub active" data-target="cap1">Cap√≠tulo 1 ‚Äî La cosmovisi√≥n</button>
              <button class="rsub" data-target="cap2">Cap√≠tulo 2 ‚Äî La sabidur√≠a</button>
              <button class="rsub" data-target="cap3">Cap√≠tulo 3 ‚Äî La madurez</button>
              <button class="rsub" data-target="cap4">Cap√≠tulo 4 ‚Äî Los pensamientos equivocados</button>
              <button class="rsub" data-target="cap5">Cap√≠tulo 5 ‚Äî Conceptos err√≥neos</button>
              <button class="rsub" data-target="cap6">Cap√≠tulo 6 ‚Äî La actitud</button>
              <button class="rsub" data-target="cap7">Cap√≠tulo 7 ‚Äî Las relaciones</button>
              <button class="rsub" data-target="cap8">Cap√≠tulo 8 ‚Äî La familia</button>
            </div>

            <div id="refContent">
              <div id="cap1" class="r-item subcontent active">
                <h3>Cap√≠tulo primero ‚Äî La cosmovisi√≥n</h3>
                <p>Elegir los valores que nos gu√≠an es un deber: la cosmovisi√≥n define prioridades y la forma en que interpretamos retos. Actividad: escribe tus 10 valores y prior√≠zalos con una breve justificaci√≥n para cada uno.</p>
                <div class="card">
                  <h4>Preguntas para reflexionar</h4>
                  <ul>
                    <li>¬øQu√© valores definen mi vida hoy?</li>
                    <li>¬øCu√°l fue el valor m√°s determinante en mi √∫ltima decisi√≥n importante?</li>
                    <li>¬øNecesito revisar alguna prioridad?</li>
                  </ul>
                </div>
              </div>

              <div id="cap2" class="r-item subcontent" style="display:none">
                <h3>Cap√≠tulo segundo ‚Äî La sabidur√≠a</h3>
                <p>La sabidur√≠a combina conocimiento, experiencia y juicio moral. No basta con saber; hay que aplicar. Actividad: elige una decisi√≥n pasada y escribe qu√© sabidur√≠a falt√≥.</p>
              </div>

              <div id="cap3" class="r-item subcontent" style="display:none">
                <h3>Cap√≠tulo tercero ‚Äî La madurez</h3>
                <p>La madurez implica responsabilidad, control emocional y coherencia. Practica responder en vez de reaccionar.</p>
              </div>

              <div id="cap4" class="r-item subcontent" style="display:none">
                <h3>Cap√≠tulo cuarto ‚Äî Los pensamientos equivocados</h3>
                <p>Identifica sesgos que te afectan: catastrofizaci√≥n, pensamiento polarizado, sobregeneralizaci√≥n. Actividad: reescribe un pensamiento negativo como una hip√≥tesis comprobable.</p>
              </div>

              <div id="cap5" class="r-item subcontent" style="display:none">
                <h3>Cap√≠tulo quinto ‚Äî Conceptos err√≥neos</h3>
                <p>Revisa ideas como "√©xito r√°pido" o "mi valor depende de resultados" y repl√°nt√©alas por creencias m√°s sanas.</p>
              </div>

              <div id="cap6" class="r-item subcontent" style="display:none">
                <h3>Cap√≠tulo sexto ‚Äî La actitud</h3>
                <p>La actitud adecuada no es resignaci√≥n, es serenidad activa. Mant√©n pr√°cticas de gratitud y revisi√≥n de expectativas.</p>
              </div>

              <div id="cap7" class="r-item subcontent" style="display:none">
                <h3>Cap√≠tulo s√©ptimo ‚Äî Las relaciones</h3>
                <p>Las relaciones requieren l√≠mites, comunicaci√≥n y responsabilidad compartida. Dise√±a rituales de reconocimiento semanal en tu c√≠rculo cercano.</p>
              </div>

              <div id="cap8" class="r-item subcontent" style="display:none">
                <h3>Cap√≠tulo octavo ‚Äî La familia</h3>
                <p>La familia es el primer laboratorio de √©tica pr√°ctica. Prop√≥n rituales familiares semanales y roles claros para momentos de crisis.</p>
              </div>
            </div>
          </article>
        </section>

        <!-- DISCURSO FINAL -->
        <section id="discurso" class="section" role="tabpanel" aria-hidden="true">
          <article>
            <h2>Discurso final del proyecto √©tico</h2>
            <p class="long-text">Queridos: este proyecto ha sido un ejercicio de honestidad radical conmigo mismo. He convertido principios en pr√°cticas y votos en h√°bitos. Los resultados no siempre son inmediatos, pero la constancia ha generado cambios en mi entorno relacional y profesional: m√°s confianza, menos conflictos, mayor claridad de prop√≥sito.</p>

            <div class="card">
              <h4>S√≠ntesis de logros</h4>
              <ul>
                <li>Registro de pr√°cticas semanales en 8 principios esenciales.</li>
                <li>Definici√≥n e implementaci√≥n de 7 votos con compromisos claros.</li>
                <li>Gu√≠a reflexiva en 8 cap√≠tulos para revisi√≥n personal.</li>
                <li>Plan de seguimiento: revisiones trimestrales y mentor√≠as.</li>
              </ul>
            </div>

            <p class="long-text"><strong>Compromiso a futuro:</strong> Mantener revisiones trimestrales, compartir aprendizajes con mi comunidad y adaptar votos seg√∫n el crecimiento. Me comprometo a la pr√°ctica diaria, a la bondad deliberada y a la humildad para aprender siempre.</p>
          </article>
        </section>

        <footer class="app-footer">
          Proyecto √âtico ‚Äî Danny Ashley Diaz Martinez ¬∑ Dise√±ado para pr√°ctica y seguimiento personal ¬∑ ¬© 2025
        </footer>
      </main>
    </div>
  </div>

  <script>
    /******************************
     *  Navegaci√≥n principal
     ******************************/
    document.querySelectorAll('.tab-btn').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.dataset.target;
        document.querySelectorAll('.section').forEach(s=>{ s.classList.remove('active'); s.setAttribute('aria-hidden','true') });
        const el = document.getElementById(target);
        if(el){ el.classList.add('active'); el.setAttribute('aria-hidden','false'); window.scrollTo({top:0,behavior:'smooth'}); }
      });
    });

    /******************************
     *  Subtabs gen√©ricas
     ******************************/
    function setupSubtabs(containerId, selector){
      const container = document.getElementById(containerId);
      if(!container) return;
      container.querySelectorAll(selector).forEach(btn=>{
        btn.addEventListener('click',()=>{
          // siblings
          container.querySelectorAll(selector).forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          const target = btn.dataset.target;
          const contentAreaId = containerId.replace('Tabs','') + 'Content';
          const contentArea = document.getElementById(contentAreaId) || container.parentElement;
          // hide sibling subcontent inside that section
          const parentSection = btn.closest('section');
          if(!parentSection) return;
          parentSection.querySelectorAll('.subcontent').forEach(d=>{ d.style.display='none'; d.classList.remove('active'); });
          const show = parentSection.querySelector('#'+target);
          if(show){ show.style.display='block'; show.classList.add('active'); }
        });
      });
    }
    setupSubtabs('principiosTabs','.subtab');
    setupSubtabs('votosTabs','.vsub');
    setupSubtabs('reflexTabs','.rsub');

    /******************************
     *  Bit√°coras: guardar en localStorage
     ******************************/
    const STORAGE_KEY = 'proyecto_etico_entries_v1';
    function loadEntries(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'); }catch(e){ return {}; } }
    function saveEntries(obj){ localStorage.setItem(STORAGE_KEY, JSON.stringify(obj)); updateCounts(); }
    function updateCounts(){
      const obj = loadEntries(); let total=0;
      for(const k in obj) total += (Array.isArray(obj[k])? obj[k].length : 0);
      document.getElementById('entriesCount').textContent = total + ' pr√°cticas guardadas';
    }
    updateCounts();

    // Utility: render lists
    function renderList(principio){
      const store = loadEntries();
      const list = store[principio] || [];
      const container = document.getElementById('list-'+principio.toLowerCase().replace(/\s+/g,''));
      if(!container) return;
      container.innerHTML = '';
      if(list.length===0){ container.innerHTML = '<li class="small muted">Sin registros</li>'; return; }
      list.slice().reverse().forEach((item,idx)=>{
        const li = document.createElement('li');
        li.style.marginBottom='8px';
        const date = item.fecha || item._savedAt || 'Sin fecha';
        li.innerHTML = `<strong>${date}</strong> ‚Äî <span style="display:block;max-width:820px">${(item.frase)||(item.situacion? (item.situacion.slice(0,150)+'...') : '')}</span>
                        <div style="margin-top:6px;display:flex;gap:8px">
                          <button class="tiny btn ghost" data-principio="${principio}" data-index="${list.length-1-idx}" onclick="viewEntry(event)">Ver</button>
                          <button class="tiny btn" data-principio="${principio}" data-index="${list.length-1-idx}" onclick="downloadEntry(event)">Descargar</button>
                          <button class="tiny btn ghost" data-principio="${principio}" data-index="${list.length-1-idx}" onclick="deleteEntry(event)">Eliminar</button>
                        </div>`;
        container.appendChild(li);
      });
    }

    // initialize render for all known lists
    ['comunicacion','comprender','motivar','justicia','critica','perdon','confiar','integridad'].forEach(id=>{
      renderList(id);
    });

    // Form handlers: save, clear, export
    document.querySelectorAll('.logForm').forEach(form=>{
      const principio = form.dataset.principio || 'General';
      // buttons inside
      form.querySelectorAll('.saveBtn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          // collect form data
          const data = {};
          new FormData(form).forEach((v,k)=> data[k]=v);
          data._principio = principio;
          data._savedAt = new Date().toLocaleString();
          // store
          const store = loadEntries();
          const key = principio.toLowerCase().replace(/\s+/g,'');
          if(!store[key]) store[key]=[];
          store[key].push(data);
          saveEntries(store);
          // feedback
          const msg = form.querySelector('.savedMsg');
          if(msg){ msg.textContent = 'Guardado ‚úì'; setTimeout(()=> msg.textContent='',1800); }
          // re-render list
          const containerKey = key;
          renderList(containerKey);
        });
      });

      form.querySelectorAll('.clearBtn').forEach(btn=>{
        btn.addEventListener('click', ()=>{ form.reset(); const msg = form.querySelector('.savedMsg'); if(msg) msg.textContent='Limpiado'; setTimeout(()=> msg.textContent='',1200); });
      });

      form.querySelectorAll('.exportBtn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const data = {};
          new FormData(form).forEach((v,k)=> data[k]=v);
          data._principio = principio;
          data._savedAt = new Date().toISOString();
          const content = JSON.stringify(data, null, 2);
          const filename = `entrada_${principio.replace(/\s+/g,'_').toLowerCase()}_${(new Date()).toISOString().slice(0,10)}.json`;
          downloadText(content, filename, 'application/json');
        });
      });
    });

    // Download helper
    function downloadText(text, filename, mime='text/plain'){
      const blob = new Blob([text],{type:mime});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click();
      setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); },500);
    }

    // View entry
    function viewEntry(e){
      const btn = e.currentTarget || e.target;
      const principio = btn.dataset.principio;
      const idx = parseInt(btn.dataset.index,10);
      const store = loadEntries();
      const key = principio.toLowerCase().replace(/\s+/g,'');
      const list = store[key] || [];
      const entry = list[idx];
      if(!entry){ alert('Entrada no encontrada'); return; }
      // Show a modal-like alert (simple)
      const content = Object.entries(entry).map(([k,v])=> `${k}: ${v}`).join('\\n\\n');
      const win = window.open('','entrada','width=700,height=600,scrollbars=yes');
      win.document.title = 'Entrada ‚Äî ' + principio;
      const pre = win.document.createElement('pre');
      pre.style.whiteSpace='pre-wrap';
      pre.style.fontFamily='inherit';
      pre.style.padding='12px';
      pre.textContent = content;
      win.document.body.appendChild(pre);
    }

    // download single entry
    function downloadEntry(e){
      const btn = e.currentTarget || e.target;
      const principio = btn.dataset.principio;
      const idx = parseInt(btn.dataset.index,10);
      const store = loadEntries();
      const key = principio.toLowerCase().replace(/\s+/g,'');
      const list = store[key] || [];
      const entry = list[idx];
      if(!entry){ alert('Entrada no encontrada'); return; }
      const filename = `entrada_${key}_${(new Date()).toISOString().slice(0,10)}.json`;
      downloadText(JSON.stringify(entry,null,2), filename, 'application/json');
    }

    // delete entry
    function deleteEntry(e){
      if(!confirm('¬øEliminar esta entrada? Esta acci√≥n no se puede deshacer.')) return;
      const btn = e.currentTarget || e.target;
      const principio = btn.dataset.principio;
      const idx = parseInt(btn.dataset.index,10);
      const store = loadEntries();
      const key = principio.toLowerCase().replace(/\s+/g,'');
      if(!store[key]) return;
      // remove by index in reversed list reference
      // our UI uses reversed display; compute actual index
      const actualIndex = store[key].length - 1 - idx;
      store[key].splice(actualIndex,1);
      saveEntries(store);
      renderList(key);
    }

    /******************************
     *  Render existing entries on load
     ******************************/
    (function initRender(){
      const store = loadEntries();
      Object.keys(store).forEach(k=>{
        const container = document.getElementById('list-'+k);
        if(container) renderList(k);
      });
      updateCounts();
    })();

    /******************************
     *  Votos: guardar, copiar
     ******************************/
    document.querySelectorAll('.saveVotoBtn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const voto = btn.dataset.voto;
        const key = 'voto_' + voto.toLowerCase().replace(/\s+/g,'');
        const title = document.getElementById('voto-title-'+key.split('_')[1])? document.getElementById('voto-title-'+key.split('_')[1]).value : '';
        // but inputs use different ids; we'll generalize: find inputs inside the same parent container
        const parent = btn.closest('.card');
        const inputs = parent.querySelectorAll('input');
        const values = {};
        inputs.forEach((inp,i)=> values['field'+i] = inp.value);
        localStorage.setItem(key, JSON.stringify(values));
        const msg = parent.querySelector('.small.muted');
        if(msg){ msg.textContent = 'Voto guardado ‚úì'; setTimeout(()=> msg.textContent='',1800); }
      });
    });

    document.querySelectorAll('.copyVotoBtn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const voto = btn.dataset.voto;
        const parent = btn.closest('.card');
        const inputs = parent.querySelectorAll('input');
        const text = Array.from(inputs).map(i=> i.placeholder + ': ' + (i.value||'')).join('\\n');
        navigator.clipboard?.writeText(text).then(()=> {
          const idMsg = parent.querySelector('.small.muted');
          if(idMsg){ idMsg.textContent = 'Copiado al portapapeles ‚úì'; setTimeout(()=> idMsg.textContent='',1600); }
        }).catch(()=> alert('No se pudo copiar autom√°ticamente. Selecciona y presiona Ctrl+C'));
      });
    });

    /******************************
     *  Exportar todo el proyecto
     ******************************/
    document.getElementById('exportAll').addEventListener('click', ()=>{
      const store = loadEntries();
      // include votos guardados
      const votos = {};
      ['honestidad','generosidad','trabajo','humildad','planificacion','sentido','dominio'].forEach(name=>{
        const key = 'voto_'+name;
        votos[key] = JSON.parse(localStorage.getItem(key) || 'null');
      });
      const payload = {meta:{author:'Danny Ashley Diaz Martinez', title:'Proyecto √©tico', exportedAt:new Date().toISOString()}, entries:store, votos:votos};
      const filename = 'proyecto_etico_export_'+(new Date()).toISOString().slice(0,10)+'.json';
      downloadText(JSON.stringify(payload,null,2), filename, 'application/json');
    });

    /******************************
     *  Imprimir
     ******************************/
    document.getElementById('printBtn').addEventListener('click', ()=> window.print());

    /******************************
     *  Dark mode toggle (simple)
     ******************************/
    const darkToggle = document.getElementById('darkToggle');
    darkToggle.addEventListener('click', ()=>{
      const isDark = document.documentElement.hasAttribute('data-theme');
      if(isDark){
        document.documentElement.removeAttribute('data-theme');
        darkToggle.textContent = 'üåô Modo';
        darkToggle.setAttribute('aria-pressed','false');
      } else {
        document.documentElement.setAttribute('data-theme','dark');
        darkToggle.textContent = '‚òÄÔ∏è Claro';
        darkToggle.setAttribute('aria-pressed','true');
      }
    });

    // dark theme styles (injected)
    (function addDarkStyles(){
  const css = `
  :root[data-theme="dark"]{
    --bg: linear-gradient(180deg,#071126,#071b2a);
    --card: rgba(8,12,20,0.85);
    --glass: rgba(255,255,255,0.03);
    --accent: #60a5fa;
    --ink: #e6eefc;
    --ink-strong: #f7fbff;
    --ink-muted: #9fb4d9;
    --line: rgba(255,255,255,0.08);
    --field-bg: linear-gradient(180deg,#0b1724,#0b1f2d);
    --field-border: #1f2a3a;
    --chip-bg:#0f2138;
    --chip-ink:#cfe1ff;
    color-scheme: dark;
  }

  :root[data-theme="dark"] body{ background:var(--bg); color:var(--ink); }
  :root[data-theme="dark"] a{ color:var(--accent); }

  /* contenedores */
  :root[data-theme="dark"] .site-header{
    background: linear-gradient(90deg, rgba(96,165,250,0.10), rgba(16,24,39,0.12));
    box-shadow:none;
  }
  :root[data-theme="dark"] nav.sidebar,
  :root[data-theme="dark"] main.content{
    background: rgba(3,7,18,0.6);
    box-shadow:none;
    border:1px solid var(--line);
  }
  :root[data-theme="dark"] .card{
    background: rgba(255,255,255,0.03);
    border:1px solid var(--line);
  }
  :root[data-theme="dark"] .hero{
    background: linear-gradient(180deg, rgba(96,165,250,0.10), rgba(30,58,92,0.10));
  }

  /* tipograf√≠a general */
  :root[data-theme="dark"] .project-title,
  :root[data-theme="dark"] nav h3,
  :root[data-theme="dark"] article h2,
  :root[data-theme="dark"] h3, 
  :root[data-theme="dark"] h4, 
  :root[data-theme="dark"] h5{ color: var(--ink-strong); }
  :root[data-theme="dark"] .meta,
  :root[data-theme="dark"] .small,
  :root[data-theme="dark"] .small.muted,
  :root[data-theme="dark"] .muted{ color: var(--ink-muted); }
  :root[data-theme="dark"] article p,
  :root[data-theme="dark"] label{ color: var(--ink); }

  /* tabs principales */
  :root[data-theme="dark"] .tab-btn{
    color: var(--ink);
    background: transparent;
  }
  :root[data-theme="dark"] .tab-btn:hover{
    background: linear-gradient(90deg, rgba(96,165,250,0.10), rgba(28,43,66,0.10));
  }
  :root[data-theme="dark"] .tab-btn.active{
    background: linear-gradient(90deg, rgba(96,165,250,0.18), rgba(28,43,66,0.12));
    color: var(--accent);
  }

  /* subtabs chips */
  :root[data-theme="dark"] .subtabs button{
    border:1px solid var(--line);
    color: var(--chip-ink);
    background: transparent;
  }
  :root[data-theme="dark"] .subtabs button.active{
    background: var(--accent);
    color: #0b1220;
    border-color: transparent;
    box-shadow: 0 8px 20px rgba(96,165,250,0.24);
  }

  /* botones */
  :root[data-theme="dark"] .btn{ box-shadow:none; }
  :root[data-theme="dark"] .btn.ghost,
  :root[data-theme="dark"] .btn.secondary{
    background: transparent;
    color: var(--accent);
    border:1px solid rgba(96,165,250,0.35);
  }
  :root[data-theme="dark"] .btn.ghost:hover,
  :root[data-theme="dark"] .btn.secondary:hover{
    background: rgba(96,165,250,0.12);
  }

  /* campos de formulario */
  :root[data-theme="dark"] textarea,
  :root[data-theme="dark"] input[type="text"],
  :root[data-theme="dark"] input[type="date"],
  :root[data-theme="dark"] select{
    background: var(--field-bg);
    border:1px solid var(--field-border);
    color: var(--ink);
  }
  :root[data-theme="dark"] textarea::placeholder,
  :root[data-theme="dark"] input::placeholder{ color:#7b8aa7; }
  :root[data-theme="dark"] textarea:focus,
  :root[data-theme="dark"] input[type="text"]:focus,
  :root[data-theme="dark"] input[type="date"]:focus,
  :root[data-theme="dark"] select:focus{
    outline: 2px solid var(--accent);
    outline-offset: 1px;
    border-color: var(--accent);
  }

  /* badges y pills */
  :root[data-theme="dark"] .pill{
    background: var(--chip-bg);
    color: var(--chip-ink);
    border:1px solid var(--line);
  }

  /* listas y separadores */
  :root[data-theme="dark"] hr{ border-color: var(--line) !important; }

  /* enlaces y foco accesible */
  :root[data-theme="dark"] :focus-visible{
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-radius: 6px;
  }
  `;
  const s = document.createElement('style');
  s.textContent = css;
  document.head.appendChild(s);
})();


    /******************************
     *  Accessibility: keyboard nav between tabs
     ******************************/
    (function keyboardTabs(){
      const tabList = document.getElementById('mainTabs');
      const tabs = Array.from(tabList.querySelectorAll('.tab-btn'));
      tabList.addEventListener('keydown', (e)=>{
        const idx = tabs.findIndex(t=> t.classList.contains('active'));
        if(e.key === 'ArrowDown' || e.key === 'ArrowRight'){ e.preventDefault(); const next = tabs[(idx+1)%tabs.length]; next.click(); next.focus(); }
        if(e.key === 'ArrowUp' || e.key === 'ArrowLeft'){ e.preventDefault(); const prev = tabs[(idx-1+tabs.length)%tabs.length]; prev.click(); prev.focus(); }
      });
    })();

    /******************************
     *  Small: make sure list elements repaint when storage changes
     ******************************/
    window.addEventListener('storage', ()=> {
      ['comunicacion','comprender','motivar','justicia','critica','perdon','confiar','integridad'].forEach(renderList);
      updateCounts();
    });

    /******************************
     *  End of script
     ******************************/
  </script>
</body>
</html>
